---
title: Design
weight: 2
---

# Proposed data model

This is data model we will aim for.  Its designed to accommodate new business
cases as quickly and easily as possible.

<%= partial 'partials/mermaid' %>

<div class="mermaid">
classDiagram

    gp_hef_loans ..> funding_applications : 0..1 to 1
    gp_hef_loans ..> gp_hef_loans_org_income_types : 1 to 1..*
    gp_hef_loans_org_income_types ..> org_income_types : 1 to 1
    gp_hef_loans ..> gp_hef_loans_plans_for_loans : 1 to 1..*
    gp_hef_loans_plans_for_loans ..> plans_for_loans : 1 to 1
    gp_hef_loans ..> gp_hef_loans_repayment_freqs : 1 to 1..*
    gp_hef_loans_repayment_freq ..> repayment_frequencies : 1 to 1
    funding_applications ..> organisations : 0..* to 1
    funding_applications <.. funding_applications_addresses : 1..* to 1
    users ..> people : 0..1 to 1
    users ..> user_organisations : 1 to 1..*
    user_organisations ..> organisations : 1 to 1
    people <.. people_addresses : 1..* to 1
    funding_applications_people ..> funding_applications : 0..* to 1
    people_declarations ..> declarations : 1 to 1
    people_declarations ..> people : 0..* to 1
    people_applications ..> relationship_types : 1 to 1
    people_applications ..> people : 1 to 1
    funding_application_dclrtns ..> funding_applications : 0..* to 1
    funding_application_dclrtns ..> declarations : 1 to 1
    funding_applications_addresses ..> addresses : 1 to 1
    organisations_addresses ..> addresses : 1 to 1
    people_addresses ..> addresses : 1 to 1
    organisations <.. organisations_addresses : 1..* to 1
    organisations <.. organisations_org_types: 1..* to 1
    organisations_org_types ..> org_types: 1 to 1
    organisation_missions ..> organisations: 1..* to 1
    missions ..> organisation_missions : 0..* to 1
    outcomes..> outcome_types : 1 to 1
    outcomes..> funding_applications : 1..* to 1
    costs ..> cost_types : 1 to 1
    costs ..> funding_applications : 1..* to 1
    cash_contributions ..> secured_types : 1 to 1
    cash_contributions ..> funding_applications : 0..* to 1
    grant_programme_sff_small ..> permission_types : 1 to 1
    grant_programme_sff_small ..> funding_applications : 0..1 to 1
    non_cash_contributions ..> funding_applications : 0..* to 1
    volunteers ..> funding_applications : 0..* to 1
    supporting_evidence ..> funding_applications : 0..* to 1


   class funding_applications{
      id: UUID **PK**
      project_reference_number: String
      salesforce_case_id: String
      salesforce_case_number: String
      submitted_on: String
      organisation: UUID **FK**
      created_at: Timestamp
      updated_at: Timestamp
	}
    class outcomes{
      id: UUID **PK**
      application_id: UUID **FK**
      outcome_type: Integer **FK**
      description: Text
      created_at: Timestamp
      updated_at: Timestamp
    }
    class outcome_types{
      id: Integer **PK**
      name: String
      created_at: Timestamp
      updated_at: Timestamp
    }
    class organisations{
      id: UUID **PK**
      name: String
      org_type: Integer
      company_number: String
      charity_number: String
      charity_number_ni: String
      salesforce_account_id: String
      created_at: Timestamp
      updated_at Timestamp
    }
    class user_organisations{
    id: UUID **PK**
    user_id: UUID **FK**
    organisation_id: UUID **FK**
    }
    class users{
      id: UUID **PK**
      person_id: UUID **FK**
      organisation_id: UUID **FK**
      email: String
      encrypted_password: String
      reset_password_token: String
      reset_password_sent_at: Timestamp
      remember_created_at: Timestamp
      confirmation_token: String
      confirmed_at: Timestamp
      confirmation_sent_at: Timestamp
      unconfirmed_email: String
      created_at: Timestamp
      updated_at : Timestamp
    }
    class people{
      id: UUID **PK**
      name: String
      date_of_birth: Date
      email: String
      phone_number: String
      created_at: Timestamp
      updated_at: Timestamp
    }
    class org_types{
      id: Integer **PK**
      name: String
      created_at: Timestamp
      updated_at: Timestamp
    }
    class organisation_missions{
      id : UUID **PK*
      organisation_id: UUID **FK**
      created_at: Timestamp
      updated_at: Timestamp
    }
    class missions{
      id: Integer **PK**
      organision_mission_id: UUID **FK**
      name: String
      created_at: Timestamp
      updated_at: Timestamp
    }
    class volunteers{
      id: UUID **PK**
      application_id: UUID **FK**
      hours: Integer
      description: Text
      created_at: Timestamp
      updated_at: Timestamp
    }
    class non_cash_contributions{
      id: UUID **PK**
      application_id: UUID **FK**
      amount: Float
      description: Text
      created_at: Timestamp
      updated_at: Timestamp
    }
    class cash_contributions{
      id: UUID **PK**
      application_id: UUID **FK**
      amount: Float
      description: Text
      secured_type_id: Integer
      created_at: Timestamp
      updated_at: Timestamp
    }
    class supporting_evidence{
      id: UUID **PK**
      application_id: UUID **FK**
      description: Text
      created_at: Timestamp
      updated_at: Timestamp
    }
    class secured_types{
      id: Integer **PK**
      name: String
      created_at: Timestamp
      updated_at: Timestamp
    }
    class costs{
      id: UUID **PK**
      application_id: UUID **FK**
      cost_type: Integer **FK**
      amount: Float
      description: Text
      created_at : Timestamp
      updated_at : Timestamp
    }
    class cost_types{
      id: Integer **PK**
      name: String
      created_at: Timestamp
      updated_at: Timestamp
    }
    class addresses{
      id: UUID **PK**
      line1: String
      line2: String
      line3: String
      townCity: String
      County: Sting
      postcode: String
      udprn: String
      lat: String
      long: String
      created_at: Timestamp
      updated_at: Timestamp
    }
    class grant_programme_sff_small{
      id: UUID **PK**
      application_id: UUID **FK**
      title: String
      difference_description: Text
      community_description: Text
      best_placed_description: Text
      capital_work: Boolean
      heritage_description: Text
      description: Text
      start_date: Date
      end_date: Date
      is_partnership: Boolean
      partnership_details: Text
      permission_type: id
      permission_description: Text
      created_at: Timestamp
      updated_at: Timestamp
    }
    class permission_types{
      id: Integer **PK**
      name: String
      created_at: Timestamp
      updated_at: Timestamp
    }
    class funding_applications_people{
      id: Integer **PK**
      person_id: UUID **FK**
      application_id: UUID **FK**
      relationship: Integer **FK*
      created_at: Timestamp
      updated_at: Timestamp
    }
    class people_declarations{
      id: UUID **PK**
      person_id: UUID **FK**
      declaration_id: UUID **FK*\
      created_at: Timestamp
      updated_at: Timestamp
     }
    class relationship_types{
      id: integer **PK**
      name: String
      created_at: Timestamp
      updated_at: Timestamp
    }
    class declarations{
      id: UUID **PK**
      declaration_type: String
      json: JSONB
      version: integer
      created_at: Timestamp
      updated_at: Timestamp
    }
    class funding_application_dclrtns{
      id: UUID **PK**
      application_id: UUID **FK**
      declaration_id: UUID **FK**
      created_at: Timestamp
      updated_at: Timestamp
    }
    class funding_applications_addresses{
      id: UUID **PK**
      address_id: UUID **FK**
      funding_application_id: UUID **FK**
    }
    class organisations_addresses{
      id: UUID **PK**
      address_id: UUID **FK**
      organisation_id: UUID **FK**
    }
    class people_addresses{
      id: UUID **PK**
      address_id: UUID **FK**
      person_id: UUID **FK**
    }
    class gp_hef_loans{
      id: UUID **PK**
      previous_nlhf_funding :  boolean 
      can_legally_take_on_debt : boolean 
      any_debt_restrictions : boolean 
      debt_description : text
      can_provide_security : boolean 
      security_restrictions : boolean 
      security_description : text
      has_had_an_average_yearly_cash_surplus : boolean
      average_yearly_cash_surplus : integer
      has_had_a_surplus_in_last_reporting_year : boolean 
      cash_surplus_in_last_year : integer
      can_use_direct_bank_transfer : boolean 
      bankruptcy_or_administration : boolean 
      bankruptcy_or_administration_description : text
      considers_state_aid : boolean 
      has_applied_for_grant_or_loan :  boolean 
      other_funding_details : text
      efforts_to_reduce_borrowing : text
      plans_for_loan_description : text
      time_to_repay_loan : integer
      cashflow_understanding : text
      loan_amount_requested : integer
      gp_hef_loans_org_income_type : UUID **FK**
      gp_hef_loans_plans_for_loan :UUID **FK** 
      gp_hef_loans_repayment_frequency : UUID **FK**
      created_at: Timestamp
      updated_at: Timestamp
    }
    class plans_for_loans{
      id: UUID **PK**
      plan: string
      created_at: Timestamp
      updated_at: Timestamp
    }
    class repayment_frequencies{
      id: UUID **PK**
      frequency : string
      created_at: Timestamp
      updated_at: Timestamp
    }
    class gp_hef_loans_plans_for_loans{
      id: UUID **PK**
      gp_hef_loan : UUID **FK**
      plans_for_loan : UUID **FK**
      created_at: Timestamp
      updated_at: Timestamp
    }
    class gp_hef_loans_repayment_freqs{
      id: UUID **PK**
      gp_hef_loan : UUID **FK**
      repayment_frequency : UUID **FK**
      created_at: Timestamp
      updated_at: Timestamp
    }
    class gp_hef_loans_org_income_types{
      id: UUID **PK**
      gp_hef_loan  : UUID **FK**
      org_income_type  : UUID **FK**
      created_at: Timestamp
      updated_at: Timestamp
    }
    class org_income_types{
      id: UUID **PK**
      name : string
      created_at: Timestamp
      updated_at: Timestamp
    }
    class funding_applications_people{
      id: UUID **PK**
      person_id: UUID **FK**
      funding_application_id: UUID **FK**
      created_at: Timestamp
      updated_at: Timestamp
    }
    class organisations_org_types{
      id: UUID **PK**
      organisation_id: UUID **FK**
      org_type_id: UUID **FK**
      created_at: Timestamp
      updated_at: Timestamp
    }
</div>
